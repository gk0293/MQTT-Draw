<Application x:Class="MqttDaGService.App"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:MqttDaGService.ViewModel"
            StartupUri="/View/ServiceWindow.xaml">
   <Application.Resources>
       <ResourceDictionary>
           <ResourceDictionary.MergedDictionaries>
               <!-- MahApps.Metro resource dictionaries. Make sure that all file names are Case Sensitive! -->
               <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
               <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
               <!-- Theme setting -->
               <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Themes/Light.Blue.xaml" />
           </ResourceDictionary.MergedDictionaries>

            <!-- 自定义按钮样式 -->
            <Style x:Key="SuccessPrimaryButton" TargetType="Button">
                <Setter Property="Background" Value="#FF4CAF50"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderBrush" Value="#FF45A049"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="10,5"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border 
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                                <ContentPresenter 
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- 其他状态样式模板同理定义 -->
            <Style x:Key="DangerPrimaryButton" TargetType="Button">
                <Setter Property="Background" Value="#FFF44336"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderBrush" Value="#FFE53935"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border 
                                 Background="{TemplateBinding Background}"
                                 BorderBrush="{TemplateBinding BorderBrush}"
                                 BorderThickness="1"
                                 CornerRadius="4">
                                <ContentPresenter 
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="WarningPrimaryButton" TargetType="Button">
                <Setter Property="Background" Value="#FFFF9800"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderBrush" Value="#FFF57C00"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border 
                                 Background="{TemplateBinding Background}"
                                 BorderBrush="{TemplateBinding BorderBrush}"
                                 BorderThickness="1"
                                 CornerRadius="4">
                                <ContentPresenter 
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="PrimaryButton" TargetType="Button">
                <Setter Property="Background" Value="#FF2196F3"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderBrush" Value="#FF1976D2"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border 
                                 Background="{TemplateBinding Background}"
                                 BorderBrush="{TemplateBinding BorderBrush}"
                                 BorderThickness="1"
                                 CornerRadius="4">
                                <ContentPresenter 
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="{x:Type local:MessageItem}">
                <Setter Property="Background" Value="White" />
                <Setter Property="Width" Value="300" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type local:MessageItem}">
                            <Grid
                                Name="PART_Grid"
                                Margin="4"
                                RenderTransformOrigin=".5,0">
                                <Grid.RenderTransform>
                                    <ScaleTransform />
                                </Grid.RenderTransform>
                                <Border
                                    x:Name="PART_Border"
                                    Background="#FFF5F5F5"
                                    BorderBrush="#FFE0E0E0"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="4"
                                    Effect="{DynamicResource DropShadowEffect}"
                                    SnapsToDevicePixels="True"
                                    UseLayoutRounding="True" />
                                <Border Padding="10">
                                    <DockPanel>
                                        <Path
                                            x:Name="PART_Path"
                                            Width="15"
                                            Height="15"
                                            Data="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" Fill="#FF2196F3"
                                            Stretch="Fill" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="5,0"
                                            VerticalAlignment="Center"
                                            FontSize="14"
                                            Foreground="{TemplateBinding Foreground}"
                                            Text="{TemplateBinding Content}"
                                            TextWrapping="Wrap" />
                                    </DockPanel>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="MessageType" Value="Warning">
                                    <Setter TargetName="PART_Path" Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                                    <Setter TargetName="PART_Path" Property="Fill" Value="#FFFF9800" />
                                    <Setter Property="Foreground" Value="#FFFF9800" />
                                </Trigger>
                                <Trigger Property="MessageType" Value="Error">
                                    <Setter TargetName="PART_Path" Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                                    <Setter TargetName="PART_Path" Property="Fill" Value="#FFf44336" />
                                    <Setter Property="Foreground" Value="#FFf44336" />
                                </Trigger>
                                <Trigger Property="MessageType" Value="Information">
                                    <Setter TargetName="PART_Path" Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                    <Setter TargetName="PART_Path" Property="Fill" Value="#FF4CAF50" />
                                    <Setter Property="Foreground" Value="#FF4CAF50" />
                                </Trigger>
                                <Trigger Property="MessageType" Value="Question">
                                    <Setter TargetName="PART_Path" Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2v-4h2v4zm0-6h-2V7h2v2z" />
                                    <Setter TargetName="PART_Path" Property="Fill" Value="#FF9E9E9E" />
                                    <Setter Property="Foreground" Value="#FF9E9E9E" />
                                </Trigger>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_Grid"
                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                From="0"
                                                To="1"
                                                Duration="0:0:0.2" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="PART_Grid"
                                                Storyboard.TargetProperty="Opacity"
                                                From="0.01"
                                                To="1"
                                                Duration="0:0:0.2" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>


                                <!-- 完全移除会立即隐藏元素的触发器 -->
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
   </Application.Resources>
</Application>
