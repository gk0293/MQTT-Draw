<mah:MetroWindow x:Class="MqttDaGService.View.ServiceWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
       xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
       xmlns:local="clr-namespace:MqttDaGService.ViewModel" 
       
       mc:Ignorable="d"
       Title="ServiceWindow" MinHeight="800" MinWidth="600"
                 Width="600"
       WindowStartupLocation="CenterScreen" FontFamily="Microsoft YaHei UI">
    <Viewbox >
        <Grid>
            <Grid.DataContext>
                <local:ServiceVM/>
            </Grid.DataContext>
            <Grid Height="800" Width="600" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="125"/>
                    <RowDefinition Height="250"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Grid.Row="0"
                 Content="开启服务端" HorizontalAlignment="Center" Height="60" Width="120" 
                 Command="{Binding StartServerCommand }"
                 FontFamily="Microsoft YaHei UI" FontSize="18" FontWeight="Normal" Margin="0,32,0,33"/>
                <Button Grid.Column="1" Grid.Row="0"
                 Content="关闭服务端" HorizontalAlignment="Center" Height="60" Width="120" 
                 Command="{Binding StopServerCommand }"
                 FontFamily="Microsoft YaHei UI" FontSize="18" FontWeight="Normal" Margin="0,32,0,33"/>

                <Button Grid.Column="2" 
                     Content="设  置" Command="{Binding OpenNewServiceCommand}" 
                     HorizontalAlignment="Center" VerticalAlignment="Center" Width="120" Height="60" 
                     FontSize="20" FontWeight="Normal" FontFamily="Microsoft YaHei UI"/>

                <!--用户列表-->
                <Border  Grid.Column="0" Grid.Row="1" Margin="2,0,2,20"
                 BorderBrush="Black" CornerRadius="3" BorderThickness="2" >
                    <ListBox Margin="0,0,0,0" FontSize="18" 
                     ItemsSource="{Binding Clients}" />
                </Border>

                <!--主题列表-->
                <Border Grid.Column="1" Grid.Row="1" Margin="2,0,2,20"
                 BorderBrush="Black" CornerRadius="3" BorderThickness="2" >
                    <ListBox Margin="0,0,0,0" FontSize="18" 
                             ItemsSource="{Binding TopicsList}" 
                             SelectedItem="{Binding SelectedTopic}" 
                           />
                </Border>

                <!--主题下成员列表-->
                <Border Grid.Column="2" Grid.Row="1" Margin="2,0,2,20"
                        BorderBrush="Black" CornerRadius="3" BorderThickness="2" >
                    <ListBox Margin="0,0,0,0" FontSize="18" 
                            ItemsSource="{Binding TopicClient }" />
                </Border>

                <!--日志-->
                <Border Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="3" Margin="2,0,2,120"
                     BorderBrush="Black" BorderThickness="2" CornerRadius="3"  >
                    <TextBox Grid.Column="0"  IsReadOnly="True"
                     TextWrapping="Wrap" Text="{Binding LogContent }"  FontSize="14" />
                </Border>

                <!--全局广播-->
                <TextBox Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2"  Margin="40,0,0,50"
                         HorizontalAlignment="Left" VerticalAlignment="Bottom"
                         Text="{Binding PubMessage }" 
                         TextWrapping="NoWrap"   Width="358" Height="50" FontSize="16"/>
                <Button Grid.Column="2" Grid.Row="2"   HorizontalAlignment="Left"  VerticalAlignment="Top"
                         Content="广 播"  Command="{Binding PublishCommand}"
                        Margin="50,327,0,0"   Height="46" Width="80" FontSize="18" />
                <TextBlock HorizontalAlignment="Center" Margin="0,99,0,0" Text="客户端" VerticalAlignment="Top" Width="50" FontSize="16" FontFamily="Microsoft YaHei" FontWeight="Bold"/>
                <TextBlock HorizontalAlignment="Center" Margin="0,99,0,0" Text="主题" VerticalAlignment="Top" Width="36" Grid.Column="1" FontSize="16" FontFamily="Microsoft YaHei" FontWeight="Bold"/>
                <TextBlock HorizontalAlignment="Center" Margin="0,99,0,0" Text="主题下客户端" VerticalAlignment="Top" Width="98" Grid.Column="2" FontSize="16" FontFamily="Microsoft YaHei" FontWeight="Bold"/>



            </Grid>
        </Grid>
    </Viewbox>
</mah:MetroWindow>
